trigger:
- none

pool:
  vmImage: ubuntu-latest

steps:
  - task: UseDotNet@2
    inputs:
      packageType: 'sdk'
      version: 8.0.303
  - task: DotNetCoreCLI@2
    inputs:
      projects: 'src/Catalog.API/Catalog.API.csproj'
      arguments: '--configuration Release'
  - task: AzureContainerApps@1
    inputs:
      appSourcePath: 'src/Catalog.API'
      azureSubscription: 'Azure Learning Sub(d7e3c15f-a785-4ecd-944b-d03698d68b5d)'
      acrName: 'eshoptestacr1'
      containerAppName: 'catalog-api-test'
      resourceGroup: 'testapp-rg'
      containerAppEnvironment: 'testappenv12'
      runtimeStack: 'dotnetcore:8.0'
      environmentVariables: 'ConnectionStrings__catalogdb=secretref:dbconnection-catalogapi'
